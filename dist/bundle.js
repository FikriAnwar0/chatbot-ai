/*! For license information please see bundle.js.LICENSE.txt */
(()=>{function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw i}}}}function t(){var e,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function c(t,a,o,i){var c=a&&a.prototype instanceof s?a:s,u=Object.create(c.prototype);return n(u,"_invoke",function(t,n,a){var o,i,c,s=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,i=0,c=e,f.n=n,l}};function p(t,n){for(i=t,c=n,r=0;!d&&s&&!a&&r<u.length;r++){var a,o=u[r],p=f.p,m=o[2];t>3?(a=m===n)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(i=0,f.v=n,f.n=o[1]):p<m&&(a=t<3||o[0]>n||n>m)&&(o[4]=t,o[5]=n,f.n=m,i=0))}if(a||t>1)return l;throw d=!0,n}return function(a,u,m){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),i=u,c=m;(r=i<2?e:c)||!d;){o||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(s=2,o){if(i||(a="next"),r=o[a]){if(!(r=r.call(o,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((r=(d=f.n<0)?c:t.call(n,f))!==l)break}catch(t){o=e,i=1,c=t}finally{s=1}}return{value:r,done:d}}}(t,o,i),!0),u}var l={};function s(){}function u(){}function d(){}r=Object.getPrototypeOf;var f=[][o]?r(r([][o]())):(n(r={},o,function(){return this}),r),p=d.prototype=s.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,n(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,n(p,"constructor",d),n(d,"constructor",u),u.displayName="GeneratorFunction",n(d,i,"GeneratorFunction"),n(p),n(p,i,"Generator"),n(p,o,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m}})()}function n(e,t,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}n=function(e,t,r,a){if(t)o?o(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r;else{var i=function(t,r){n(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}},n(e,t,r,a)}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,l,"next",e)}function l(e){i(o,r,a,c,l,"throw",e)}c(void 0)})}}window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]},svg:{fontCache:"global"}};var l=document.createElement("script");l.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",l.async=!0,document.head.appendChild(l);var s=document.getElementById("burger-btn"),u=document.getElementById("sidebar-wrapper");null==s||s.addEventListener("click",function(){u.classList.toggle("active"),s.classList.toggle("active")});var d=JSON.parse(localStorage.getItem("chatHistorySessions")||"[]"),f=null;function p(e){var t={id:Date.now(),title:_(e),messages:[{role:"user",content:e}]};return d.unshift(t),f=t,v(),y(),t}function m(){return f}function h(e,t){f&&(f.messages.push({role:e,content:t}),v(),y())}function v(){localStorage.setItem("chatHistorySessions",JSON.stringify(d))}function _(e){var t=e.replace(/\s+/g," ").trim();return t.length>30?t.slice(0,30)+"…":t}function g(e,t){var n=d.find(function(t){return t.id===e});if(n){var r=t.trim();r&&r!==n.title&&(n.title=_(r),v()),y()}}function y(){var e=document.getElementById("chat-history");e&&(e.innerHTML="",d.forEach(function(t){var n=document.createElement("div");n.className="history-item"+(t===f?" active":"");var r=document.createElement("div");r.className="history-title",r.textContent=t.title,r.onclick=function(){return function(e){var t=d.find(function(t){return t.id===e});t&&(f=t,function(e){var t=document.getElementById("chat-messages");t&&(t.innerHTML="",e.messages.forEach(function(e){return P(e.role,e.content)}),G(),t.scrollTop=t.scrollHeight)}(t))}(t.id)};var a=document.createElement("input");a.className="rename-input hidden",a.type="text",a.value=t.title,r.ondblclick=function(e){e.stopPropagation(),r.classList.add("hidden"),a.classList.remove("hidden"),a.focus(),a.select()},a.addEventListener("blur",function(){g(t.id,a.value)}),a.addEventListener("keydown",function(e){"Enter"===e.key?(g(t.id,a.value),a.blur()):"Escape"===e.key&&(a.value=t.title,a.classList.add("hidden"),r.classList.remove("hidden"))});var o=document.createElement("button");o.className="history-delete-btn",o.innerHTML="✕",o.onclick=function(e){e.stopPropagation(),function(e){E.textContent=e.title,b.classList.remove("hidden"),k=e}(t)},n.appendChild(r),n.appendChild(a),n.appendChild(o),e.appendChild(n)}))}var b=document.getElementById("confirm-modal"),E=document.getElementById("modal-chat-title"),H=document.getElementById("confirm-delete-btn"),L=document.getElementById("cancel-delete-btn"),k=null;function $(){b.classList.add("hidden"),k=null}H.addEventListener("click",function(){var e,t;k&&(e=k.id,d=d.filter(function(t){return t.id!==e}),(null===(t=f)||void 0===t?void 0:t.id)===e&&(f=null),v(),y(),document.getElementById("chat-messages").innerHTML=""),$()}),L.addEventListener("click",function(){$()});var w=document.getElementById("clear-all-btn"),T=document.getElementById("confirm-clear-all-modal"),I=document.getElementById("cancel-clear-all"),C=document.getElementById("confirm-clear-all");null==w||w.addEventListener("click",function(e){e.preventDefault(),T.classList.remove("hidden")}),null==I||I.addEventListener("click",function(){T.classList.add("hidden")}),null==C||C.addEventListener("click",function(){d=[],f=null,v();var e=document.getElementById("chat-history");e&&(e.innerHTML="");var t=document.getElementById("chat-messages");t&&(t.innerHTML=""),T.classList.add("hidden")});var B,S=document.getElementById("chat-messages"),x=document.getElementById("chat-input"),N=document.getElementById("send-btn"),O=document.getElementById("stop-btn"),M=!1;function D(e){e?(N.classList.add("hidden"),O.classList.remove("hidden")):(N.classList.remove("hidden"),O.classList.add("hidden"))}function j(){return A.apply(this,arguments)}function A(){return(A=c(t().m(function e(){var n,a,o,i,c,l;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=x.value.trim()){e.n=1;break}return e.a(2);case 1:return m()?h("user",n):p(n),P("user",n),x.value="",x.style.height="auto",(a=document.createElement("div")).classList.add("message","bot"),(o=document.createElement("div")).classList.add("bubble"),a.appendChild(o),S.appendChild(a),S.scrollTop=S.scrollHeight,D(!0),M=!0,i=m(),c=r(i.messages),l="",e.p=2,e.n=3,q(c,function(e){M&&(l+=e,o.innerHTML=J(l),G(),Prism.highlightAll(),K(),S.scrollTop=S.scrollHeight)});case 3:h("assistant",l),e.n=5;break;case 4:e.p=4,e.v,l?o.innerHTML=J(l):o.textContent="Invalid Request, Please Try Again.";case 5:return e.p=5,M=!1,D(!1),Prism.highlightAll(),K(),S.scrollTop=S.scrollHeight,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}))).apply(this,arguments)}function P(e,t){var n=document.createElement("div");if(n.classList.add("message",e),t){var r=document.createElement("div");r.classList.add("bubble"),r.innerHTML=J(t),n.appendChild(r)}S.appendChild(n),G(),Prism.highlightAll(),K(),S.scrollTop=S.scrollHeight}function J(e){var t=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n=[];e=(e=e.replace(/\$\$([^]*?)\$\$/g,function(e,t){return n.push({type:"block",content:t.trim()}),"__MATH_BLOCK_".concat(n.length-1,"__")})).replace(/\$(.*?)\$/g,function(e,t){return n.push({type:"inline",content:t.trim()}),"__MATH_INLINE_".concat(n.length-1,"__")});var r=[];e=(e=e.replace(/```(\w+)?\n([\s\S]*?)```/g,function(e,t,n){return r.push({lang:t||"text",code:n}),"__CODE_BLOCK_".concat(r.length-1,"__")})).replace(/^######\s+(.*)$/gm,"__H6__$1__ENDH6__").replace(/^#####\s+(.*)$/gm,"__H5__$1__ENDH5__").replace(/^####\s+(.*)$/gm,"__H4__$1__ENDH4__").replace(/^###\s+(.*)$/gm,"__H3__$1__ENDH3__").replace(/^##\s+(.*)$/gm,"__H2__$1__ENDH2__").replace(/^#\s+(.*)$/gm,"__H1__$1__ENDH1__");var a=t(e);return a=(a=(a=(a=(a=a.replace(/__H6__(.*?)__ENDH6__/g,"<h6>$1</h6>").replace(/__H5__(.*?)__ENDH5__/g,"<h5>$1</h5>").replace(/__H4__(.*?)__ENDH4__/g,"<h4>$1</h4>").replace(/__H3__(.*?)__ENDH3__/g,"<h3>$1</h3>").replace(/__H2__(.*?)__ENDH2__/g,"<h2>$1</h2>").replace(/__H1__(.*?)__ENDH1__/g,"<h1>$1</h1>")).replace(/((?:\|[^\n]*)\|(?:\s*\n)?)+/g,function(e){var t=e.trim().split("\n").filter(function(e){return e.includes("|")});if(t.length<2)return e;var n=t[0].split("|").slice(1,-1).map(function(e){return"<th>".concat(e.trim(),"</th>")}).join(""),r=t[1];if(!/^\s*\|?\s*-+/.test(r))return e;var a=t.slice(2).filter(function(e){return e.trim().length>0}).map(function(e){var t=e.split("|").slice(1,-1).map(function(e){return"<td>".concat(e.trim(),"</td>")}).join("");return"<tr>".concat(t,"</tr>")}).join("");return'<div class="table-wrapper"><table class="markdown-table"><thead><tr>'.concat(n,"</tr></thead><tbody>").concat(a,"</tbody></table></div>")})).replace(/^\*\s+(.*)$/gm,"<li>$1</li>").replace(/(<li>[^]*?<\/li>)/g,"<ul>$1</ul>").replace(/---/g,"<hr />").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/~~(.*?)~~/g,"<s>$1</s>").replace(/`([^`\n]+)`/g,'<span class="inline-code">$1</span>')).replace(/\[([^\]]+)]\((https?:\/\/[^\s)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>')).replace(/(?<!["'>])\b(https?:\/\/[^\s<>()]+)\b/g,'<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>'),r.forEach(function(e,n){var r=t(e.code);a=a.replace("__CODE_BLOCK_".concat(n,"__"),'<div class="code-wrapper"><button class="copy-btn">Copy</button><pre class="code-block"><code class="language-'.concat(e.lang,'">').concat(r,"</code></pre></div>"))}),n.forEach(function(e,t){var n="block"===e.type?'<div class="math-block">\\['.concat(e.content,"\\]</div>"):'<span class="math-inline">\\('.concat(e.content,"\\)</span>");a=a.replace("__MATH_".concat(e.type.toUpperCase(),"_").concat(t,"__"),n)}),'<div class="markdown-text">'.concat(a,"</div>")}function G(){document.querySelectorAll(".copy-btn").forEach(function(e){e.onclick=function(){var t=e.parentElement.querySelector("code"),n=(null==t?void 0:t.textContent)||"";navigator.clipboard.writeText(n).then(function(){e.textContent="Copied!",setTimeout(function(){return e.textContent="Copy"},2e3)})}})}function K(){window.MathJax&&"function"==typeof MathJax.typesetPromise&&MathJax.typesetPromise()}function q(e,t){return F.apply(this,arguments)}function F(){return(F=c(t().m(function n(r,a){var o,i,c,l,s,u,d,f,p,m,h,v,_,g,y;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return B=new AbortController,t.n=1,fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",signal:B.signal,headers:{Authorization:"Bearer ".concat(""),"Content-Type":"application/json"},body:JSON.stringify({model:"",messages:r,stream:!0})});case 1:if((o=t.v).ok){t.n=2;break}throw new Error("Gagal koneksi ke OpenRouter");case 2:i=o.body.getReader(),c=new TextDecoder("utf-8"),l="";case 3:if(!M){t.n=14;break}return t.n=4,i.read();case 4:if(s=t.v,u=s.value,!s.done){t.n=5;break}return t.a(3,14);case 5:l+=c.decode(u,{stream:!0}),d=l.split("\n"),l=d.pop(),f=e(d),t.p=6,f.s();case 7:if((p=f.n()).done){t.n=10;break}if(!(m=p.value).trim().startsWith("data:")){t.n=9;break}if("[DONE]"!==(v=m.replace(/^data:\s*/,""))){t.n=8;break}return t.a(2);case 8:_=JSON.parse(v),(g=null===(h=_.choices)||void 0===h||null===(h=h[0])||void 0===h||null===(h=h.delta)||void 0===h?void 0:h.content)&&a(g);case 9:t.n=7;break;case 10:t.n=12;break;case 11:t.p=11,y=t.v,f.e(y);case 12:return t.p=12,f.f(),t.f(12);case 13:t.n=3;break;case 14:return t.a(2)}},n,null,[[6,11,12,13]])}))).apply(this,arguments)}N.addEventListener("click",j),x.addEventListener("keydown",function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),j())}),x.addEventListener("input",function(){x.style.height="auto",x.style.height=x.scrollHeight+"px",x.style.height=Math.min(x.scrollHeight,200)+"px"}),O.addEventListener("click",function(){M=!1,B&&B.abort(),D(!1)});var R=document.getElementById("new-chat-btn");R&&R.addEventListener("click",function(){var e={id:Date.now(),title:"Obrolan baru",messages:[]};d.unshift(e),f=e,v(),y();var t=document.getElementById("chat-messages");t&&(t.innerHTML=""),x.focus()}),y()})();